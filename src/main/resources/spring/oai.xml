<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />

    <context:component-scan base-package="org.fcrepo" />
 
    <bean name="jcrOaiGenerator" class="org.fcrepo.oai.generator.JcrOaiGenerator">
        <property name="eraIdFormat" value="https://era.library.ualberta.ca/items/%1$s" />
        <property name="doiFullUriFormat" value="https://doi.org/%1$s" />
        <property name="controlledVocabularyInstitutionMap">
          <map>
            <entry key="http://id.loc.gov/authorities/names/n79058482" value="University of Alberta" />
            <entry key="http://id.loc.gov/authorities/names/n2009054054" value="St. Stephen&apos;s College" />
          </map>
        </property>
        <property name="jcrNamespaceMap">
            <map>
                <!-- 
                    for use with ModeShape JCR node namespace specification formate with {} syntax 
                    as per: modeshape-jcr/src/main/java/org/modeshape/jcr/value/basic/NameValueFactory.java "create" function
                -->
                <entry key="model" value="{info:fedora/fedora-system:def/model#}" />
                <entry key="ual" value="{http://terms.library.ualberta.ca/}" />
                <entry key="dc" value="{http://purl.org/dc/elements/1.1/}" />
                <entry key="dcterms" value="{http://purl.org/dc/terms/}" />
                <entry key="swrc" value="{http://ontoware.org/swrc/ontology#}" />
            </map>
        </property>
    </bean>

    <bean name="jcrOaiDcGenerator" class="org.fcrepo.oai.generator.JcrOaiDcGenerator" parent="jcrOaiGenerator">
    </bean>

    <bean name="jcrOaiEtdmsGenerator" class="org.fcrepo.oai.generator.JcrOaiEtdmsGenerator" parent="jcrOaiGenerator">
        <property name="lacIdFormat" value="TC-AEU-%1$s" />
        <property name="pdfUrlFormat" value="https://era.library.ualberta.ca/items/%1$s/view/%2$s/%3$s" />
    </bean>

    <bean name="jcrOaiOreGenerator" class="org.fcrepo.oai.generator.JcrOaiOreGenerator" parent="jcrOaiGenerator">
        <property name="lacIdFormat" value="TC-AEU-%1$s" />
        <property name="pdfUrlFormat" value="https://era.library.ualberta.ca/items/%1$s/view/%2$s/%3$s" />
        <property name="oaiUrlFormat" value="https://era.library.ualberta.ca/oai?verb=GetRecord&amp;metadataPrefix=oai_dc&amp;identifier=%1$s" />
        <property name="etdmsUrlFormat" value="https://era.library.ualberta.ca/oai?verb=GetRecord&amp;metadataPrefix=oai_etdms&amp;identifier=%1$s" />
        <property name="oreUrlFormat" value="https://era.library.ualberta.ca/oai?verb=GetRecord&amp;metadataPrefix=ore&amp;identifier=%1$s" />
        <property name="htmlUrlFormat" value="https://era.library.ualberta.ca/items/%1$s" />
        <property name="oreSourceGenerator" value="University of Alberta Education &amp; Research Archive" />
        <property name="oreSourceAuthorName" value="University of Alberta Education &amp; Research Archive" />
        <property name="oreSourceAuthorUri" value="https://era.library.ualberta.ca" />
    </bean>

    <bean name="oaiProviderService" class="org.fcrepo.oai.service.OAIProviderService">
        <property name="maxListSize" value="300" />
        <property name="setsEnabled" value="true" />
        <property name="searchEnabled" value="true" />
        <property name="rootPath" value="/oai" />
        <property name="idFormat" value="oai:era.library.ualberta.ca:1/%1$s" />
        <property name="propertyHasCollectionId" value="http://terms.library.ualberta.ca/path" />
        <property name="propertyHasModel" value="info:fedora/fedora-system:def/model#hasModel" />
        <property name="propertyOaiRepositoryName" value="http://www.openarchives.org/OAI/2.0/repositoryName" />
        <property name="propertyOaiDescription" value="http://www.openarchives.org/OAI/2.0/description" />
        <property name="propertyOaiAdminEmail" value="http://www.openarchives.org/OAI/2.0/adminEmail" />
        <property name="propertyOaiBaseUrl" value="http://www.openarchives.org/OAI/2.0/baseUrl" />
        <property name="namespaces">
            <map>
                <!-- 
                    2018-04-05: disabled due to preexisting content within Fedora with preexisting URIs
                    these fail as per
                    https://wiki.duraspace.org/display/FEDORA4x/Best+Practices+-+RDF+Namespaces
                    example error
                    ERROR - OAIProviderService.init(279): The namespace with URI
                    "http://terms.library.ualberta.ca/" cannot be unregistered because the node type 
                    "{http://terms.library.ualberta.ca/}Community" uses it.
                -->
                <!-- also defined in the CND file included within
                -Dfcrepo.modeshape.configuration=classpath:/config/file-simple/repository.json
                -->
                <!--
                <entry key="model" value="info:fedora/fedora-system:def/model#" />
                <entry key="mode" value="http://www.modeshape.org/1.0" />
                <entry key="oai" value="http://www.openarchives.org/OAI/2.0/" />
                <entry key="works_models" value="http://projecthydra.org/works/models#" />

                <entry key="bibo" value="http://purl.org/ontology/bibo/" />
                <entry key="cc" value="http://creativecommons.org/ns#" />
                <entry key="dc" value="http://purl.org/dc/elements/1.1/" />
                <entry key="dcterms" value="http://purl.org/dc/terms/" />
                <entry key="ebu" value="http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#" />
                <entry key="ebucore" value="http://www.ebu.ch/metadata/ontologies/ebucore/ebucore#" />
                <entry key="etd_ms" value="http://www.ndltd.org/standards/metadata/etdms/1.0/" />
                <entry key="fabio" value="http://purl.org/spar/fabio/"/>
                <entry key="foaf" value="http://xmlns.com/foaf/0.1/" />
                <entry key="lang" value="http://id.loc.gov/vocabulary/iso639-2/" />
                
                <entry key="mrel" value="http://id.loc.gov/vocabulary/relators/" />
                <entry key="naf" value="http://id.loc.gov/authorities/names/" />
                <entry key="obo" value="http://purl.obolibrary.org/obo/" />
                <entry key="owl" value="http://www.w3.org/2002/07/owl#" />
                <entry key="ore" value="http://www.openarchives.org/ore/terms/" />
                <entry key="pcdm" value="http://pcdm.org/models#" />
                <entry key="prism" value="http://prismstandard.org/namespaces/basic/3.0/" />
                <entry key="rdf" value="http://www.w3.org/1999/02/22-rdf-syntax-ns#" />
                <entry key="rdfs" value="http://www.w3.org/2000/01/rdf-schema#" />
                <entry key="schema" value="http://schema.org/" />  
                <entry key="scholar" value="http://scholarsphere.psu.edu/ns#" />
                <entry key="skos" value="http://www.w3.org/2004/02/skos/core#" />
                <entry key="status" value="http://www.w3.org/2003/06/sw-vocab-status/ns#" />
                <entry key="swrc" value="http://ontoware.org/swrc/ontology#" />
                <entry key="ual" value="http://terms.library.ualberta.ca/" />
                <entry key="ualdate" value="http://terms.library.ualberta.ca/date/" />
                <entry key="ualid" value="http://terms.library.ualberta.ca/id/" />
                <entry key="ualids" value="http://terms.library.ualberta.ca/identifiers/" />
                <entry key="ualrole" value="http://terms.library.ualberta.ca/role/" />
                <entry key="ualthesis" value="http://terms.library.ualberta.ca/thesis/" />
                <entry key="works" value="http://pcdm.org/works#" />
                <entry key="vivo" value="http://vivoweb.org/ontology/core#" />
                -->
            </map>
        </property>
        <property name="metadataFormats">
            <map>
                <entry key="oai_dc" value-ref="oaiDcFormat" />
                <entry key="oai_etdms" value-ref="oaiEtdmsFormat" />
                <entry key="ore" value-ref="oaiOreFormat" />
            </map>
        </property>
        <property name="descriptiveContent">
            <map>
                <entry key="repositoryName" value="ERA: Education and Research Archive" />
                <entry key="adminEmail" value="eraadmi@ualberta.ca" />
                <entry key="baseUrl" value="https://era.library.ualberta.ca/oai" />
                <entry key="scheme" value="oai" />
                <entry key="repositoryIdentifier" value="era.library.ualberta.ca" />
                <entry key="delimiter" value=":" />
                <entry key="sampleIdentifier" value="oai:era.library.ualberta.ca:1/b8515q959" />
            </map>
        </property>
    </bean>

    <bean name="oaiDcFormat" class="org.fcrepo.oai.service.MetadataFormat">
        <property name="prefix" value="oai_dc" />
        <property name="schemaUrl" value="http://www.openarchives.org/OAI/2.0/oai_dc.xsd" />
        <property name="namespace" value="http://www.openarchives.org/OAI/2.0/oai_dc/" />
        <property name="propertyName" value="http://fedora.info/definitions/v4/config#hasOaiDCRecord" />
    </bean>

    <bean name="oaiQdcFormat" class="org.fcrepo.oai.service.MetadataFormat">
        <property name="prefix" value="oai_qdc" />
        <property name="schemaUrl" value="http://dublincore.org/schemas/xmls/qdc/2006/01/06/dcterms.xsd" />
        <property name="namespace" value="http://purl.org/dc/terms/" />
        <property name="propertyName" value="http://fedora.info/definitions/v4/config#hasOaiQDCRecord" />
    </bean>

    <bean name="oaiEtdmsFormat" class="org.fcrepo.oai.service.MetadataFormat">
        <property name="prefix" value="oai_etdms" />
        <property name="schemaUrl" value="http://www.ndltd.org/standards/metadata/etdms/1.0/etdms.xsd" />
        <property name="namespace" value="http://www.ndltd.org/standards/metadata/etdms/1.0/" />
        <property name="propertyName" value="http://fedora.info/definitions/v4/config#hasOaiETDMSRecord" />
    </bean>
	
    <bean name="oaiOreFormat" class="org.fcrepo.oai.service.MetadataFormat">
        <property name="prefix" value="ore" />
        <property name="schemaUrl" value="http://www.kbcafe.com/rss/atom.xsd.xml" />
        <property name="namespace" value="http://www.w3.org/2005/Atom" />
        <property name="propertyName" value="http://fedora.info/definitions/v4/config#hasOaiOreRecord" />
    </bean>
</beans>
